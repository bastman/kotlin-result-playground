/*
 * This Kotlin source file was generated by the Gradle 'init' task.
 */
package example.playground

import com.github.michaelbull.result.*
import util.ktresult.runCatchingKT


private data class MyErr(val ex: Throwable)

class App {
    val items: MutableList<Item> = mutableListOf()


    fun run() {

        val item = runCatchingKT { items.get(123) }
                .mapError { MyErr(it) }
                .onFailure { println("failed: $it") }
                .onSuccess { println("success: $it") }
                .andThen {
                    runCatchingKT { items.get(123) }
                            .mapError { MyErr(it) }
                }
                .getOr {
                    throw RuntimeException("foo")
                }


        //println(item)
    }


}

data class Item(val id: Int)

fun main(args: Array<String>) {
    App().run()
}
